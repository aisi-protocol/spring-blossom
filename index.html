<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>春暖花开 - 匿名情绪支持</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌸</text></svg>">
</head>
<body>
    <!-- 花瓣效果容器 -->
    <div id="petal-container"></div>
    
    <!-- 主应用 -->
    <div class="app-container">
        <!-- 场景1：情绪选择 -->
        <div id="sceneEmotion" class="scene active">
            <header class="app-header">
                <h1>🌊 春暖花开</h1>
                <p class="tagline">每一次倾诉，都是内心的春暖花开</p>
            </header>
            
            <main class="main-content">
                <div class="instruction">
                    <p>选择你此刻最真实的情绪：</p>
                </div>
                
                <div class="emotion-garden">
                    <button class="emotion-flower" data-emotion="开心">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">开心</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="烦躁">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">烦躁</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="低落">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">低落</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="快乐">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">快乐</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="焦虑">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">焦虑</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="纠结">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">纠结</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="受伤">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">受伤</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="不安">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">不安</span>
                    </button>
                    
                    <button class="emotion-flower" data-emotion="懵了">
                        <div class="flower-petals"></div>
                        <span class="emotion-text">懵了</span>
                    </button>
                </div>
                
                <div class="action-section">
                    <button id="btnStartMatch" class="primary-btn" disabled>
                        <span class="btn-icon">🌊</span>
                        <span class="btn-text">开始匹配相似感受</span>
                    </button>
                    
                    <div class="features">
                        <div class="feature">
                            <span class="feature-icon">🌸</span>
                            <span>完全匿名</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">⏱️</span>
                            <span>限时30分钟</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">🔒</span>
                            <span>安全加密</span>
                        </div>
                    </div>
                    
                    <p class="safety-note">
                        请勿分享个人信息，所有对话均受内容过滤保护
                    </p>
                </div>
            </main>
        </div>
        
        <!-- 场景2：匹配中 -->
        <div id="sceneMatching" class="scene">
            <header class="app-header">
                <h1>🌊 春暖花开</h1>
                <p class="tagline">正在海面上寻找相似的感受...</p>
            </header>
            
            <main class="main-content">
                <div class="matching-animation">
                    <div class="wave"></div>
                    <div class="wave wave-2"></div>
                    
                    <div class="searching-content">
                        <div class="loading-spinner"></div>
                        <p>正在为你寻找此刻能理解你 <span id="currentEmotion">开心</span> 的人</p>
                        <div class="loading-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                
                <div class="action-section">
                    <button id="btnCancelMatch" class="secondary-btn">
                        <span class="btn-icon">↩️</span>
                        <span class="btn-text">取消匹配</span>
                    </button>
                </div>
            </main>
        </div>
        
        <!-- 场景3：聊天室 -->
        <div id="sceneChat" class="scene">
            <header class="chat-header">
                <div class="header-left">
                    <button id="btnEndChat" class="icon-btn" title="结束对话">
                        ⏹️
                    </button>
                </div>
                
                <div class="header-center">
                    <h2>匿名倾诉中</h2>
                    <div class="chat-status">
                        <span class="status-icon">🌸</span>
                        <span>基于情绪匹配</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="timer">
                        <span class="timer-icon">⏱️</span>
                        <span id="timerDisplay">30:00</span>
                    </div>
                </div>
            </header>
            
            <main class="chat-main">
                <!-- 欢迎消息 -->
                <div class="welcome-message">
                    <div class="welcome-icon">🌊</div>
                    <div class="welcome-text">
                        <h3>海浪带来了相似的感受</h3>
                        <p>你们彼此选择了 <span id="matchedEmotion">开心</span> 的情绪</p>
                        <p class="hint">这是一次完全匿名的限时对话，请保持尊重与善意</p>
                    </div>
                </div>
                
                <!-- 消息区域 -->
                <div id="chatMessages" class="chat-messages">
                    <div class="system-message">
                        <div class="message-bubble system">
                            <p>对话已开始，请勿分享个人信息。30分钟后连接将自动断开。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 输入区域 -->
                <div class="chat-input-area">
                    <div class="input-container">
                        <textarea 
                            id="inputMessage" 
                            placeholder="写下你想说的话（内容经过安全过滤）..." 
                            maxlength="500"
                            rows="1"
                        ></textarea>
                        <div class="input-info">
                            <span id="charCount">0/500</span>
                        </div>
                    </div>
                    
                    <button id="btnSendMessage" class="send-btn" disabled>
                        <span class="send-icon">🌸</span>
                        <span class="send-text">发送</span>
                    </button>
                </div>
            </main>
        </div>
    </div>
    
    <!-- 脚本 -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>
</html>
